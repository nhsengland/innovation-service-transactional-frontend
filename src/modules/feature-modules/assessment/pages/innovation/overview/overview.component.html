<theme-content-wrapper [status]="pageStatus">

  <div *ngIf="!innovation?.owner?.isActive" class="nhsuk-warning-callout nhsuk-u-margin-top-0">
    <div class="nhsuk-heading-m nhsuk-warning-callout__label">
      <span role="text"> <span class="nhsuk-u-visually-hidden">Important: </span> User Locked </span>
    </div>
    <p> Please note that the innovator {{ innovation?.owner?.name }} is currently locked. </p>
  </div>

  <ng-container [ngSwitch]="innovation?.status">
    <ng-container *ngSwitchCase="'WAITING_NEEDS_ASSESSMENT'">
      <div class="nhsuk-action-link">
        <a *ngIf="!innovation?.assessment?.id" class="nhsuk-action-link__link" routerLink="/assessment/innovations/{{ innovation?.id || '' }}/assessments/new">
          <theme-svg-icon type="action"></theme-svg-icon>
          <span class="nhsuk-action-link__text"> Start the needs assessment process </span>
        </a>
        <a *ngIf="innovation?.assessment?.id" routerLink="/assessment/innovations/{{ innovation?.id }}/assessments/{{ innovation?.assessment?.id }}/edit" class="nhsuk-button"> Continue needs assessment </a>
      </div>
    </ng-container>
    <ng-container *ngSwitchCase="'NEEDS_ASSESSMENT'">
      <div class="d-flex">
        <theme-svg-icon type="edit"></theme-svg-icon>
        <span class="nhsuk-u-margin-right-2"></span>
        <h2 class="nhsuk-heading-m">Needs assessment in progress</h2>
      </div>
      <hr class="nhsuk-section-break nhsuk-section-break--visible" />
      <dl class="nhsuk-summary-list">
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">Assigned assessor</dt>
          <dd class="nhsuk-summary-list__value">{{ innovation?.assessment?.assignedTo?.name }}</dd>
        </div>
      </dl>
      <a routerLink="/assessment/innovations/{{ innovation?.id }}/assessments/{{ innovation?.assessment?.id }}/edit" class="nhsuk-button"> Continue needs assessment </a>
    </ng-container>
    <ng-container *ngSwitchCase="'IN_PROGRESS'">
      <div class="d-flex">
        <theme-svg-icon type="success"></theme-svg-icon>
        <span class="nhsuk-u-margin-right-2"></span>
        <h2 class="nhsuk-heading-m">Needs assessment complete</h2>
      </div>
      <hr class="nhsuk-section-break nhsuk-section-break--visible" />
      <dl class="nhsuk-summary-list">
        <div class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">Assessor</dt>
          <dd class="nhsuk-summary-list__value">{{ innovation?.assessment?.assignedTo?.name }}</dd>
        </div>
      </dl>
    </ng-container>
  </ng-container>

  
  <ng-container *ngIf="innovation?.status && innovation?.status !== 'WAITING_NEEDS_ASSESSMENT'">
    <ul class="nhsuk-grid-row nhsuk-card-group">
      <li *ngFor="let item of cardsList" class="nhsuk-grid-column-one-half nhsuk-card-group__item">
        <div class="nhsuk-card nhsuk-card--clickable">
          <div class="nhsuk-card__content">
            <h2 class="nhsuk-card__heading nhsuk-heading-m">
              <a routerLink="{{ item.link }}" class="nhsuk-card__link">
                <span class="nhsuk-u-visually-hidden"> Go to </span> {{ item.title }}
              </a>
            </h2>
            <ng-container *ngIf="item.count!== 0; else noSectionsToSubmit">
              <p class="d-flex nhsuk-u-font-size-18 nhsuk-u-font-weight-bold align-items-baseline">
                <span class="nhsuk-u-font-size-48">{{ item.count }}</span>
                <ng-container *ngIf="item.total">
                  <span class="nhsuk-u-padding-1">of</span>
                  <span class="mr-auto">{{ item.total }}</span>
                </ng-container>
                <span class="nhsuk-u-font-size-16 nhsuk-u-font-weight-normal align-self-self-end nhsuk-u-padding-left-4">
                  {{ item.label }}
                </span>
              </p>
            </ng-container>
            <ng-container *ngIf="item.date">
              <p class="nhsuk-u-font-size-16 font-color-secondary">
                {{ item.footer }} on {{ item.date | date: ('app.date_formats.medium_date' | translate) }}
              </p>
            </ng-container>
            <ng-template #noSectionsToSubmit>
              <p class="nhsuk-u-font-weight-normal">{{ item.emptyMessage }}</p>
            </ng-template>
          </div>
        </div>
      </li>
    </ul>
  </ng-container>

  <h2 class="nhsuk-heading-m">Innovation summary</h2>
  <dl class="nhsuk-summary-list">
    <div *ngFor="let item of innovationSummary" class="nhsuk-summary-list__row">
      <dt class="nhsuk-summary-list__key">{{ item.label }}</dt>
      <dd class="nhsuk-summary-list__value text-pre-wrap">{{ item.value }}</dd>
    </div>
  </dl>

  <h2 class="nhsuk-heading-m">Innovator contact details</h2>
  <dl class="nhsuk-summary-list">
    <div *ngFor="let item of innovatorSummary" class="nhsuk-summary-list__row">
      <dt class="nhsuk-summary-list__key">{{ item.label }}</dt>
      <dd class="nhsuk-summary-list__value text-pre-wrap">{{ item.value }}</dd>
    </div>
  </dl>

</theme-content-wrapper>
