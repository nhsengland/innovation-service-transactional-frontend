<theme-page-title [title]="pageTitle" [actions]="titleActions"></theme-page-title>

<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-one-quarter">

    <form [formGroup]="form">

      <h2 class="nhsuk-heading-xs nhsuk-u-margin-0">E-mail</h2>

      <div class="nhsuk-form-group">
        <!-- <input class="nhsuk-input ng-untouched ng-pristine ng-valid" ng-reflect-form="[object Object]" id="1640186819406634" name="search" type="text" placeholder="" style="width: calc(100% - 50px)"> -->
        <theme-form-input controlName="search" [pageUniqueField]="false">
          <ng-container append>
            <button [disabled]="searching" type="button" (click)="onSubmit()" class="nhsuk-button form-input-appended-button fill-white" style="padding: 4px 12px 0px 10px;">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" aria-hidden="true" focusable="false" height="24" width="24">
                <path d="M19.71 18.29l-4.11-4.1a7 7 0 1 0-1.41 1.41l4.1 4.11a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 10a5 5 0 1 1 5 5 5 5 0 0 1-5-5z"></path>
              </svg>
            </button>
          </ng-container>
        </theme-form-input>
      </div>

      <hr class="nhsuk-section-break nhsuk-section-break--visible nhsuk-u-margin-top-3 nhsuk-u-margin-bottom-3">

    </form>
  </div>


  <div class="nhsuk-grid-column-three-quarters nhsuk-u-padding-bottom-5">

    <div class="nhsuk-u-margin-bottom-2">
      <p class="nhsuk-body-s nhsuk-u-font-weight-bold nhsuk-u-margin-0"> Showing {{ usersList?.length }} users </p>
      <p class="nhsuk-body-s nhsuk-u-margin-0"> Search for a specific user by providing a full email address (ie, user@example.com) </p>
    </div>

    <hr class="nhsuk-section-break nhsuk-section-break--visible">

    <ng-container *ngIf="!usersList || usersList?.length === 0">
      <div
      class="d-flex nhsuk-body-s nhsuk-u-margin-0 nhsuk-u-padding-top-3 nhsuk-u-padding-bottom-3 bottom-border-separator">
        <div class="mr-auto">
          <p class="nhsuk-u-padding-top-4">There are no matching results.</p>
        </div>
      </div>
    </ng-container>
    <ng-container *ngIf="usersList && usersList.length > 0">
      <div
        *ngFor="let item of usersList"
        class="d-flex nhsuk-body-s nhsuk-u-margin-0 nhsuk-u-padding-top-3 nhsuk-u-padding-bottom-3 bottom-border-separator">
        <div class="mr-auto">
          <p class="nhsuk-hint nhsuk-u-font-size-14 nhsuk-u-margin-0">{{item.type}}</p>
          <p class="nhsuk-body-s nhsuk-u-margin-0">{{item.displayName}} ({{item.email}})</p>
        </div>
        <div class="d-flex flex-direction-column text-align-center">
          <strong class="nhsuk-tag nhsuk-tag--green nhsuk-u-margin-bottom-2">{{item.lockedAt ? 'Blocked' : 'Active'}}</strong>
          <a routerLink="{{item.id}}">View</a>
        </div>
      </div>
    </ng-container>

  </div>
</div>
