<div class="nhsuk-width-container app-width-container">

  <div *ngIf="!wizard.isFirstStep()" class="nhsuk-back-link">
    <a href="javascript:;" class="nhsuk-back-link__link" (click)="onSubmitStep('previous')">
      <svg class="nhsuk-icon nhsuk-icon__chevron-left" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M8.5 12c0-.3.1-.5.3-.7l5-5c.4-.4 1-.4 1.4 0s.4 1 0 1.4L10.9 12l4.3 4.3c.4.4.4 1 0 1.4s-1 .4-1.4 0l-5-5c-.2-.2-.3-.4-.3-.7z"></path>
      </svg>
      Go back
    </a>
  </div>

  <theme-spinner *ngIf="pageStatus === 'LOADING'" cssClass="nhsuk-u-margin-9"></theme-spinner>

  <ng-container *ngIf="pageStatus === 'READY'">

    <div class="nhsuk-grid-row">
      <div class="nhsuk-grid-column-two-thirds">

        <ng-container *ngIf="wizard.isQuestionStep()">
          <theme-form-engine #stepForm formId="ftsForm" [parameters]="wizard.currentStepParameters()" [values]="wizard.getAnswers()"></theme-form-engine>
          <button type="submit" form="ftsForm" class="nhsuk-button" (click)="onSubmitStep('next')" [disabled]="stepForm.isFormPending()"> {{ stepForm.isFormPending() ? 'Verifying...' : 'Continue' }} </button>
        </ng-container>

        <ng-container *ngIf="wizard.isSummaryStep()">

          <theme-alert [type]="alert.type" [title]="alert.title" [setFocus]="alert.setFocus">
            <p> {{ alert.message }} </p>
          </theme-alert>

          <h1 class="nhsuk-heading-l"> Check your answers </h1>

          <dl class="nhsuk-summary-list">
            <div *ngFor="let item of wizard.getSummary(); let i = index;" class="nhsuk-summary-list__row">
              <dt class="nhsuk-summary-list__key">{{item.label}}</dt>
              <dd class="nhsuk-summary-list__value text-pre-wrap">{{ item.value }}</dd>
              <dd *ngIf="item.label === 'units'">Unit/s</dd>
              <dd class="nhsuk-summary-list__actions">
                <a href="javascript:;" (click)="wizard.gotoStep(item.editStepNumber || 1)"> Change <span class="nhsuk-u-visually-hidden"> {{ item.label | lowercase }} </span></a>
              </dd>
            </div>
          </dl>
          <form [formGroup]="form" (ngSubmit)="onSubmitWizard()">
            <button type="submit" class="nhsuk-button nhsuk-u-margin-top-3 nhsuk-u-margin-right-3" [disabled]="submitBtnClicked"> Create Organisation </button>
          </form>
        </ng-container>

      </div>
    </div>

  </ng-container>

</div>
