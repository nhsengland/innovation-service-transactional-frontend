<div class="nhsuk-grid-row">
  <div class="nhsuk-grid-column-two-thirds">

    <ng-container *ngIf="wizard.isQuestionStep()">
      <h1 *ngIf="wizard.currentStep().label" class="nhsuk-heading-l"> {{ wizard.currentStep().label }} </h1>
      <p *ngIf="wizard.currentStep().description"> {{ wizard.currentStep().description }} </p>

      <theme-form-engine formId="userForm" [parameters]="wizard.currentStepParameters()" [values]="wizard.getAnswers()"></theme-form-engine>

      <button [disabled]="!continueButton.isActive" class="nhsuk-button nhsuk-u-margin-top-3" (click)="onSubmitStep('next')"> {{ continueButton.label }} </button>
    </ng-container>

    <ng-container *ngIf="wizard.isSummaryStep()">
      <h1 class="nhsuk-heading-l">{{ user ? 'This user already exists. Do you want to add them to this unit?' : 'Check your answers'}}</h1>

      <dl class="nhsuk-summary-list">
        <div *ngFor="let item of wizard.getSummary()" class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key">{{ item.label }}</dt>
          <dd class="nhsuk-summary-list__value text-pre-wrap">{{ item.value }}</dd>
          <dd class="nhsuk-summary-list__actions">
            <a *ngIf="!user || (user && !user.role && item.editStepNumber === 3)" href="javascript:void(0)" (click)="wizard.gotoStep(item.editStepNumber || 1)"> Change <span class="nhsuk-u-visually-hidden">{{ item.label | lowercase }}</span></a>
          </dd>
        </div>
      </dl>

      <button [disabled]="!submitButton.isActive" class="nhsuk-button nhsuk-u-margin-top-3" (click)="onSubmitWizard()"> {{ submitButton.label }} </button>

      <div>
        <a routerLink="/admin/organisations/{{organisationId}}/unit/{{organisationUnitId}}">Cancel</a>
      </div>
    </ng-container>

  </div>
</div>
