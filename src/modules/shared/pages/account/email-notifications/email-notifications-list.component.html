<theme-content-wrapper [status]="pageStatus()">
  <p class="nhsuk-heading-m">Email notification preferences by category</p>

  <div class="nhsuk-grid-row">
    <div class="nhsuk-grid-column-full">
      <div *ngIf="ctx.user.hasMultipleRoles() && currentRole" class="nhsuk-inset-text nhsuk-u-margin-0 nhsuk-u-margin-bottom-5">
        <p>If you update your email preferences they will only apply to the profile you are logged in with.</p>
        <p>You are logged in as {{ this.displayName }}, {{ currentRole.description }}.</p>
      </div>

      <dl class="nhsuk-summary-list nhsuk-u-padding-top-3 nhsuk-u-margin-bottom-0">
        <div *ngFor="let category of formPreferencesList" class="nhsuk-summary-list__row">
          <dt class="nhsuk-summary-list__key nhsuk-u-padding-top-3 nhsuk-u-padding-bottom-3 width-75">
            <ul class="nhsuk-list nhsuk-u-margin-0">
              <li class="nhsuk-u-margin-0 nhsuk-u-font-weight-normal">
                <span>{{ category.title }}</span>
              </li>
              <li class="nhsuk-u-font-weight-normal font-color-secondary">
                <span>{{ category.description }}</span>
              </li>
            </ul>
          </dt>

          <dd class="nhsuk-summary-list__actions vertical-align-middle">
            <span class="ml-auto nhsuk-tag nhsuk-u-font-weight-bold nhsuk-u-padding-top-2 nhsuk-u-padding-bottom-2" [ngClass]="category.cssClass">{{ category.preference }}</span>
          </dd>
        </div>
      </dl>

      <a routerLink="edit" class="nhsuk-action-link__link nhsuk-u-margin-top-6 nhsuk-u-margin-bottom-6">
        <theme-svg-icon type="arrow-right-circle" />
        <span class="nhsuk-action-link__text"> Change preferences </span>
      </a>

      <div class="nhsuk-u-margin-bottom-3">
        <span class="nhsuk-u-visually-hidden">Information:</span>
        <p class="nhsuk-u-margin-0">
          <a href="javascript:void(0)" (click)="unsubscribeAllNotifications()"> {{ this.isAnyOn ? "Unsubscribe from everything" : "Subscribe to everything" }} </a>
        </p>
      </div>
    </div>
  </div>
</theme-content-wrapper>
